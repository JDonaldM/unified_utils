<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Configuration files &mdash; unified_utils 0.0.2 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Inference utilities" href="api/infer_api.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> unified_utils
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Configuration files</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">unified_utils</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Configuration files</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/conf_files.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="configuration-files">
<h1>Configuration files<a class="headerlink" href="#configuration-files" title="Permalink to this headline">ÔÉÅ</a></h1>
<p>The analysis setup for a given run is defined in a configuration <code class="docutils literal notranslate"><span class="pre">.yaml</span></code> file.</p>
<p>An example configuration file is given below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Parameters</span><span class="p">:</span>
    <span class="n">As</span><span class="p">:</span>
        <span class="n">prior</span><span class="p">:</span>
            <span class="nb">max</span><span class="p">:</span> <span class="n">emu</span>
            <span class="nb">min</span><span class="p">:</span> <span class="n">emu</span>
            <span class="nb">type</span><span class="p">:</span> <span class="n">uniform</span>
    <span class="n">b1</span><span class="p">:</span>
        <span class="n">prior</span><span class="p">:</span>
            <span class="nb">max</span><span class="p">:</span> <span class="mf">4.0</span>
            <span class="nb">min</span><span class="p">:</span> <span class="mf">0.0</span>
            <span class="nb">type</span><span class="p">:</span> <span class="n">uniform</span>
    <span class="n">b3</span><span class="p">:</span>
        <span class="n">prior</span><span class="p">:</span>
            <span class="n">mean</span><span class="p">:</span> <span class="mf">0.0</span>
            <span class="n">stddev</span><span class="p">:</span> <span class="mf">2.0</span>
            <span class="nb">type</span><span class="p">:</span> <span class="n">marg</span>
    <span class="n">c2</span><span class="p">:</span>
        <span class="n">prior</span><span class="p">:</span>
            <span class="nb">max</span><span class="p">:</span> <span class="mf">4.0</span>
            <span class="nb">min</span><span class="p">:</span> <span class="o">-</span><span class="mf">4.0</span>
            <span class="nb">type</span><span class="p">:</span> <span class="n">uniform</span>
    <span class="n">c4</span><span class="p">:</span>
        <span class="n">fixed</span><span class="p">:</span> <span class="mf">0.0</span>
    <span class="n">cct</span><span class="p">:</span>
        <span class="n">prior</span><span class="p">:</span>
            <span class="n">mean</span><span class="p">:</span> <span class="mf">0.0</span>
            <span class="n">stddev</span><span class="p">:</span> <span class="mf">2.0</span>
            <span class="nb">type</span><span class="p">:</span> <span class="n">marg</span>
    <span class="n">ce1</span><span class="p">:</span>
        <span class="n">prior</span><span class="p">:</span>
            <span class="n">mean</span><span class="p">:</span> <span class="mf">0.0</span>
            <span class="n">stddev</span><span class="p">:</span> <span class="mf">0.16</span>
            <span class="nb">type</span><span class="p">:</span> <span class="n">marg</span>
    <span class="n">cmono</span><span class="p">:</span>
        <span class="n">fixed</span><span class="p">:</span> <span class="mf">0.0</span>
    <span class="n">cquad</span><span class="p">:</span>
        <span class="n">prior</span><span class="p">:</span>
            <span class="n">mean</span><span class="p">:</span> <span class="mf">0.0</span>
            <span class="n">stddev</span><span class="p">:</span> <span class="mf">2.0</span>
            <span class="nb">type</span><span class="p">:</span> <span class="n">marg</span>
    <span class="n">cr1</span><span class="p">:</span>
        <span class="n">prior</span><span class="p">:</span>
            <span class="n">mean</span><span class="p">:</span> <span class="mf">0.0</span>
            <span class="n">stddev</span><span class="p">:</span> <span class="mf">8.0</span>
            <span class="nb">type</span><span class="p">:</span> <span class="n">marg</span>
    <span class="n">cr2</span><span class="p">:</span>
        <span class="n">fixed</span><span class="p">:</span> <span class="mf">0.0</span>
    <span class="n">h</span><span class="p">:</span>
        <span class="n">prior</span><span class="p">:</span>
            <span class="nb">max</span><span class="p">:</span> <span class="n">emu</span>
            <span class="nb">min</span><span class="p">:</span> <span class="n">emu</span>
            <span class="nb">type</span><span class="p">:</span> <span class="n">uniform</span>
    <span class="n">w_b</span><span class="p">:</span>
        <span class="n">prior</span><span class="p">:</span>
            <span class="nb">max</span><span class="p">:</span> <span class="n">emu</span>
            <span class="n">mean</span><span class="p">:</span> <span class="mf">0.02235</span>
            <span class="nb">min</span><span class="p">:</span> <span class="n">emu</span>
            <span class="n">stddev</span><span class="p">:</span> <span class="mf">0.00049</span>
            <span class="nb">type</span><span class="p">:</span> <span class="n">truncated</span> <span class="n">normal</span>
    <span class="n">w_c</span><span class="p">:</span>
        <span class="n">prior</span><span class="p">:</span>
            <span class="nb">max</span><span class="p">:</span> <span class="n">emu</span>
            <span class="nb">min</span><span class="p">:</span> <span class="n">emu</span>
            <span class="nb">type</span><span class="p">:</span> <span class="n">uniform</span>
<span class="n">Setup</span><span class="p">:</span>
    <span class="n">bridgez</span><span class="p">:</span> <span class="n">true</span>
    <span class="n">data_type</span><span class="p">:</span> <span class="n">pybird</span>
    <span class="n">engine</span><span class="p">:</span>
        <span class="n">engine_kwargs</span><span class="p">:</span>
            <span class="n">P110_scaler</span><span class="p">:</span> <span class="n">log</span>
            <span class="n">P112_scaler</span><span class="p">:</span> <span class="n">log</span>
            <span class="n">Pct0_scaler</span><span class="p">:</span> <span class="n">log</span>
            <span class="n">Pct2_scaler</span><span class="p">:</span> <span class="n">log</span>
            <span class="n">Ploop0_scaler</span><span class="p">:</span> <span class="n">log</span>
            <span class="n">Ploop2_scaler</span><span class="p">:</span> <span class="n">log</span>
            <span class="n">path_to_model</span><span class="p">:</span> <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">lustre</span><span class="o">/</span><span class="n">jdonaldm</span><span class="o">/</span><span class="n">unified_analysis</span><span class="o">/</span><span class="n">models</span><span class="o">/</span><span class="n">highAs</span><span class="o">/</span><span class="n">z1</span><span class="mf">.52</span><span class="o">/</span>
            <span class="n">version</span><span class="p">:</span> <span class="n">custom</span>
        <span class="n">function</span><span class="p">:</span> <span class="n">emu_engine</span>
        <span class="n">path</span><span class="p">:</span> <span class="o">/</span><span class="n">users</span><span class="o">/</span><span class="n">jdonaldm</span><span class="o">/</span><span class="n">UnifiedUtils</span><span class="o">/</span><span class="n">unified_utils</span><span class="o">/</span><span class="n">engine</span><span class="o">.</span><span class="n">py</span>
        <span class="nb">type</span><span class="p">:</span> <span class="n">emulator</span>
    <span class="n">kmax</span><span class="p">:</span> <span class="mf">0.15</span>
    <span class="n">kmin</span><span class="p">:</span> <span class="mf">0.01</span>
    <span class="n">likelihood</span><span class="p">:</span>
        <span class="n">function</span><span class="p">:</span> <span class="n">marg_like</span>
        <span class="n">path</span><span class="p">:</span> <span class="o">/</span><span class="n">users</span><span class="o">/</span><span class="n">jdonaldm</span><span class="o">/</span><span class="n">UnifiedUtils</span><span class="o">/</span><span class="n">unified_utils</span><span class="o">/</span><span class="n">likelihood</span><span class="o">.</span><span class="n">py</span>
    <span class="n">norm_cov</span><span class="p">:</span> <span class="mf">50.0</span>
    <span class="n">redshift</span><span class="p">:</span> <span class="mf">1.52</span>
    <span class="n">sampler</span><span class="p">:</span>
        <span class="n">nsamples</span><span class="p">:</span> <span class="mi">50000</span>
        <span class="n">nwalk</span><span class="p">:</span> <span class="mi">1000</span>
        <span class="n">save_like</span><span class="p">:</span> <span class="n">true</span>
    <span class="n">save</span><span class="p">:</span>
        <span class="n">diagnostics</span><span class="p">:</span> <span class="n">true</span>
        <span class="n">fname</span><span class="p">:</span> <span class="n">chain</span><span class="o">.</span><span class="n">highAs</span><span class="o">.</span><span class="n">model1</span>
        <span class="n">fname_tags</span><span class="p">:</span> <span class="n">true</span>
        <span class="n">overwrite</span><span class="p">:</span> <span class="n">true</span>
        <span class="n">path</span><span class="p">:</span> <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">lustre</span><span class="o">/</span><span class="n">jdonaldm</span><span class="o">/</span><span class="n">unified_analysis</span><span class="o">/</span><span class="n">results</span><span class="o">/</span><span class="n">package_run</span><span class="o">/</span>
    <span class="n">split</span><span class="p">:</span> <span class="n">SGC</span>
</pre></div>
</div>
<p>Reading the above configuration file will result in a nested dictionary.
At the first level we can see there are two keys <code class="docutils literal notranslate"><span class="pre">&quot;Parameters&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;Setup&quot;</span></code>.
Each key of the <code class="docutils literal notranslate"><span class="pre">&quot;Parameters&quot;</span></code> dictionary should be a parameter of the model.
In this case the EFTofLSS model.
We can see that it is simple to fix parameters to constant values.
We simply use the <code class="docutils literal notranslate"><span class="pre">&quot;fixed&quot;</span></code> key.
If a parameter is free we define the type of prior by setting the <code class="docutils literal notranslate"><span class="pre">&quot;type&quot;</span></code> key to:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;uniform&quot;</span></code>: Results in a uniform prior with extremes defined in the <code class="docutils literal notranslate"><span class="pre">&quot;min&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;max&quot;</span></code> keys.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;normal&quot;</span></code>: Results in a normal (Gaussian) prior with standard deviation and mean defined in the <code class="docutils literal notranslate"><span class="pre">&quot;stddev&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;mean&quot;</span></code> keys, respectively.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;truncated</span> <span class="pre">normal&quot;</span></code>: Results in a truncated noraml prior with hard bounds defined in the <code class="docutils literal notranslate"><span class="pre">&quot;min&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;max&quot;</span></code> keys and standard deviation and mean defined in the <code class="docutils literal notranslate"><span class="pre">&quot;stddev&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;mean&quot;</span></code> keys, respectively.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;marg&quot;</span></code>: Results in a normal prior with zero mean and standard deviation defined in the <code class="docutils literal notranslate"><span class="pre">&quot;stddev&quot;</span></code> key. The parameter will be analytically marginalised and not sampled. Can only be used for linearly appearing parameters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;jeff&quot;</span></code>: Results in a Jeffreys prior. The prediction engine should be able to produce predictions of the derivaive w.r.t. parameter. Hard bounds can be imposed with the <code class="docutils literal notranslate"><span class="pre">&quot;min&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;max&quot;</span></code> keys.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;marg</span> <span class="pre">jeff&quot;</span></code>: Results in Jeffreys prior on parameters that will be analytically marginalised. An additional Gaussian prior can be imposed by passing a finite <code class="docutils literal notranslate"><span class="pre">&quot;stddev&quot;</span></code>.</p></li>
</ul>
<p>Each of the keys in the setup dictionary controls a different aspect of the
analysis setup.
If <code class="docutils literal notranslate"><span class="pre">conf[&quot;Setup&quot;][&quot;save&quot;][&quot;fname_tags&quot;]</span> <span class="pre">==</span> <span class="pre">True</span></code>, the keys and values of the
<code class="docutils literal notranslate"><span class="pre">&quot;Setup&quot;</span></code> dictionary will be used as tags in the file name for the saved
posterior samples. We expand on the elements of the <code class="docutils literal notranslate"><span class="pre">&quot;Setup&quot;</span></code> dictionary below:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;bridgez&quot;</span></code>: If <code class="docutils literal notranslate"><span class="pre">True</span></code> then bridge sampling as implamented in <code class="docutils literal notranslate"><span class="pre">pocoMC</span></code> will be used to calculate the evidence.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;data_type&quot;</span></code>: Specifies what data should be loaded with the <code class="docutils literal notranslate"><span class="pre">utils.data_loader</span> <span class="pre">function</span></code>. If <code class="docutils literal notranslate"><span class="pre">obs</span></code>, the muipole measurements will be loaded. If <code class="docutils literal notranslate"><span class="pre">mock</span></code>, the simulation mock multipoles will be loaded. If <code class="docutils literal notranslate"><span class="pre">pybird</span></code>, the mock multipole produced with <code class="docutils literal notranslate"><span class="pre">PyBird</span></code> will be loaded.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;norm_cov&quot;</span></code>: Normalisation factor for the covaraince matrix.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;redshift&quot;</span></code>: Redshift of the data to load.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;split&quot;</span></code>: What hemisphere split to use. For 6dFGS data (<code class="docutils literal notranslate"><span class="pre">...[&quot;redshift&quot;]</span> <span class="pre">==</span> <span class="pre">0.096</span></code>) this is ignored.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;kmin&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;kmax&quot;</span></code>: Scale cuts to be used.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;engine&quot;</span></code>: Information about the prediction engine.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;engine_kwargs&quot;</span></code>: Keyword arguments for the user defined prediction engine. These will <em>not</em> be used as file name tags as there can be a lot of them.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;path&quot;</span></code>: Path to <code class="docutils literal notranslate"><span class="pre">.py</span></code> file that has the user defined prediction engine.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">function</span></code>: Name of prediction engine in the <code class="docutils literal notranslate"><span class="pre">.py</span></code> file that has the engine.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code>: The type of prediction engine.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;likelihood&quot;</span></code>: Information about the likelihood function.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;path&quot;</span></code>: Path to <code class="docutils literal notranslate"><span class="pre">.py</span></code> file that has the user defined likelihood function.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">function</span></code>: Name of prediction engine in the <code class="docutils literal notranslate"><span class="pre">.py</span></code> file that has the likelihood function.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;sampler&quot;</span></code>: Arguments for the sampler.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;nsamples&quot;</span></code>: The total number of posterior samples to generate.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;nwalk&quot;</span></code>: The number of walker (particles) to use.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;save_like&quot;</span></code>: If <code class="docutils literal notranslate"><span class="pre">True</span></code>, the likelihood evalution for each posterior sample will be saved.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;save&quot;</span></code>: Specifics of saving.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;diagnostics&quot;</span></code>: Saves information that can be useful for identifying problems with sampling.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;fname&quot;</span></code>: The file name for the posterior samples. In the absence of tags this is all that will be used.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;fname_tags&quot;</span></code>: If <code class="docutils literal notranslate"><span class="pre">True</span></code>, keys and values from the <code class="docutils literal notranslate"><span class="pre">&quot;Setup&quot;</span></code> dictionary will be used as file name tags.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;overwrite&quot;</span></code>: If <code class="docutils literal notranslate"><span class="pre">True</span></code>, existing files will be overwritten.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;path&quot;</span></code>: Path to directory for storing results.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="api/infer_api.html" class="btn btn-neutral float-left" title="Inference utilities" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Jamie Donald-McCann.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>